!function(e,t,i,s,n,a){s=e.gapi||(e.gapi={}),s.analytics={q:[],ready:function(e){this.q.push(e)}},n=t.createElement(i),a=t.getElementsByTagName(i)[0],n.src="https://apis.google.com/js/platform.js",a.parentNode.insertBefore(n,a),n.onload=function(){s.load("analytics")}}(window,document,"script"),gapi.analytics.ready(function(){gapi.analytics.createComponent("ActiveUsers",{initialize:function(){this.activeUsers=0,gapi.analytics.auth.once("signOut",this.handleSignOut_.bind(this))},execute:function(){this.polling_&&this.stop(),this.render_(),gapi.analytics.auth.isAuthorized()?this.pollActiveUsers_():gapi.analytics.auth.once("signIn",this.pollActiveUsers_.bind(this))},stop:function(){clearTimeout(this.timeout_),this.polling_=!1,this.emit("stop",{activeUsers:this.activeUsers})},render_:function(){var e=this.get();this.container="string"==typeof e.container?document.getElementById(e.container):e.container},pollActiveUsers_:function(){var e=this.get(),t=1e3*(e.pollingInterval||5),i=e.template||this.template,s=e.title||"Active Users";if(isNaN(t)||t<5e3)throw new Error("Frequency must be 5 seconds or more.");this.polling_=!0,gapi.client.analytics.data.realtime.get({ids:e.ids,metrics:"rt:activeUsers"}).then(function(e){if(!e.result)return this.emit("error",{response:e}),void(document.querySelector("#activeUsersMarker")&&(document.querySelector("#activeUsersMarker").className="active-marker off"));this.hasRendered||(this.container.innerHTML=i,this.container.querySelector(".hero-metric-value").innerHTML=this.activeUsers,this.container.querySelector(".hero-sub-title")&&(this.container.querySelector(".hero-sub-title").innerHTML=s),this.hasRendered=!0);var n=e.result,a=n.totalResults?+n.rows[0][0]:0,r=this.activeUsers;document.querySelector("#activeUsersMarker")&&(a>0?document.querySelector("#activeUsersMarker").className="active-marker":document.querySelector("#activeUsersMarker").className="active-marker off"),this.emit("success",{activeUsers:this.activeUsers}),a!=r&&(this.activeUsers=a,this.onChange_(a-r)),1==this.polling_&&(this.timeout_=setTimeout(this.pollActiveUsers_.bind(this),t))}.bind(this))},onChange_:function(e){var t=this.container.querySelector(".hero-metric-value");t&&(t.innerHTML=this.activeUsers),this.emit("change",{activeUsers:this.activeUsers,delta:e}),e>0?this.emit("increase",{activeUsers:this.activeUsers,delta:e}):this.emit("decrease",{activeUsers:this.activeUsers,delta:e})},handleSignOut_:function(){this.stop(),gapi.analytics.auth.once("signIn",this.handleSignIn_.bind(this))},handleSignIn_:function(){this.pollActiveUsers_(),gapi.analytics.auth.once("signOut",this.handleSignOut_.bind(this))},template:'<div><span class="hero-metric-value"></span><span class="hero-sub-title"></span></div>'})}),gapi.analytics.ready(function(){gapi.analytics.createComponent("HeroMetric",{initialize:function(){this.isRendered=!1},execute:function(){gapi.analytics.auth.isAuthorized()?this.render():gapi.analytics.auth.once("success",this.render.bind(this))},render:function(){var e=this.get();if(this.isRendered===!1){var t=this.template;gapi.client.analytics.data.ga.get(e).then(function(i){if(!i.result)return void this.emit("error",{response:i});var s=document.getElementById(e.container);s.innerHTML=t,value=parseFloat(i.result.totalsForAllResults[e.metrics]).toFixed(1),value=e.mutator?e.mutator(value):value,s.querySelector(".hero-metric-value").innerHTML=value,s.querySelector(".hero-sub-title").innerHTML=e.title}),this.isRendered=!0,this.emit("render")}},template:'<div><span class="hero-metric-value"></span><span class="hero-sub-title"></span></div>'})});